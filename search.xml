<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Ubuntu之NetworkManager详解</title>
      <link href="/2024/12/05/ubuntu%E4%B9%8BNetworkManager%E8%AF%A6%E8%A7%A3/"/>
      <url>/2024/12/05/ubuntu%E4%B9%8BNetworkManager%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>NetworkManager是一个程序，用于为系统自动提供检测和配置以自动连接到网络。NetworkManager的功能对于无线和有线网络都非常有用。对于无线网络，NetworkManager首选已知的无线网络，并且能够切换到最可靠的网络。支持NetworkdManager的应用程序可以从联机和脱机模式切换。与无线连接相比NetworkManager更喜欢有线连接，它支持调制解调器连接和某些类型的VPN。NetworkManager最初是由RedHat开发的，现在由GNOME项目托管。<br>NetworkManager服务是管理和监控网络设置的守护进程，是2004年RedHat启动的项目，皆在能够让Linux用户更轻松的处理现代网络需求，尤其是无线网络，能够自动发现网卡并配置IP地址。Centos7之前的版本都是通过network.service管理网络配置。到了Centos7就同时支持network.service和NetworkManager.service(简称NM)，相当于在Centos7的一个过渡，默认情况下这2个服务都有开启，但是因为NetworkManager.service当时的兼容性不好，大部分人都会将其关闭。在RHEL 8&#x2F;Centos 8上已废弃network.service（默认不安装），只能通过NetworkManager进行网络配置。</p><p>NetworkManager主要管理2个对象： Connection（网卡连接配置） 和 Device（网卡设备），他们之间是多对一的关系，但是同一时刻只能有一个Connection对于Device才生效。</p><p>在RHEL 8&#x2F;Centos 8有三种方法配置网络：</p><ul><li>通过nmcli connection add命令配置，会自动生成ifcfg文件。</li><li>手动配置ifcfg文件，通过nmcli connection reload来加载生效。</li><li>手动配置ifcfg文件，通过传统network.service来加载生效。</li></ul><h2 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h2><p>在Linux中默认以systemd的形式运行，执行<code>systemctl  status network-manager.service</code>Or<code>systemctl status NetworkManager.service</code>查看信息：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl status network-manager.service</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl status NetworkManager.service</span></span><br><span class="line">● NetworkManager.service - Network Manager  </span><br><span class="line">   Loaded: loaded (/lib/systemd/system/NetworkManager.service; enabled; vendor preset: enabled)  </span><br><span class="line">   Active: active (running) since Sun 2019-10-13 19:38:49 CST; 1h 21min ago  </span><br><span class="line">     Docs: man:NetworkManager(8)  </span><br><span class="line"> Main PID: 862 (NetworkManager)  </span><br><span class="line">    Tasks: 4 (limit: 4915)  </span><br><span class="line">   CGroup: /system.slice/NetworkManager.service  </span><br><span class="line">           ├─ 862 /usr/sbin/NetworkManager --no-daemon  </span><br><span class="line">           └─1930 /sbin/dhclient -d -q -sf /usr/lib/NetworkManager/nm-dhcp-helper -pf /run/dhclient-wlp3s0.pid -lf /var/lib/NetworkManager/dhclient-9ec39b13-6d0c-468c-9a5b-fc4a2a6ea85e-wlp3s0.lease -cf /var/lib/NetworkManager/dhclient-wlp3s0.conf wlp3s</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>NetworkManager分为两个程序，一个<code>/usr/sbin/NetworkManager</code>的服务端，一个<code>/sbin/dhclient</code>客户端。</p><p>NetworkManager的配置工具有多种形式，如下：</p><ol><li>nmcli：命令行。这是最常用的工具。</li><li>nmtui：在shell终端开启文本图形界面。</li><li>nm-applet：GUI界面配置工具。</li></ol><h3 id="nmcli使用方法"><a href="#nmcli使用方法" class="headerlink" title="nmcli使用方法"></a>nmcli使用方法</h3><p>nmcli使用方法非常类似linux ip命令、cisco交换机命令，并且支持tab补全，也可在命令最后通过-h、–help、help查看帮助。在nmcli中有2个命令最为常用：</p><h4 id="nmcli-connection"><a href="#nmcli-connection" class="headerlink" title="nmcli connection"></a>nmcli connection</h4><p>译作<code>连接</code>，可理解为配置文件，相当于ifcfg-ethX。可以简写为nmcli c<br>connection有2种状态：<br>▷ 活跃（带颜色字体）：表示当前该connection生效<br>▷ 非活跃（正常字体）：表示当前该connection不生效</p><h4 id="nmcli-device"><a href="#nmcli-device" class="headerlink" title="nmcli device"></a>nmcli device</h4><p>译作<code>设备</code>，可理解为实际存在的网卡（包括物理网卡和虚拟网卡）。可以简写为nmcli d<br>device有4种常见状态：<br>▷ connected：已被NM纳管，并且当前有活跃的connection<br>▷ disconnected：已被NM纳管，但是当前没有活跃的connection<br>▷ unmanaged：未被NM纳管<br>▷ unavailable：不可用，NM无法纳管，通常出现于网卡link为down的时候（比如ip link set ethX down）</p><h4 id="nmcli-status-code"><a href="#nmcli-status-code" class="headerlink" title="nmcli status code"></a>nmcli status code</h4><p>nmcli 如果成功退出状态值为0，如果发生错误则返回大于0的值。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0: 成功-指示操作已成功 </span><br><span class="line">1: 位置或指定的错误 </span><br><span class="line">2: 无效的用户输入，错误的nmcli调用 </span><br><span class="line">3: 超时了（请参阅 --wait 选项） </span><br><span class="line">4: 连接激活失败 </span><br><span class="line">5: 连接停用失败 </span><br><span class="line">6: 断开设备失败 </span><br><span class="line">7: 连接删除失败 </span><br><span class="line">8: 网络管理器没有运行 </span><br><span class="line">10: 连接、设备或接入点不存在 </span><br><span class="line">65: 当使用 --complete-args 选项，文件名应遵循。</span><br></pre></td></tr></table></figure><h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看ip（类似于ifconfig、ip addr）</span>  </span><br><span class="line">nmcli  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建connection，配置静态ip（等同于配置ifcfg，其中BOOTPROTO=none，并ifup启动）</span>  </span><br><span class="line">nmcli c add type ethernet con-name ethX ifname ethX ipv4.addr 192.168.1.100/24 ipv4.gateway 192.168.1.1 ipv4.method manual  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建connection，配置动态ip（等同于配置ifcfg，其中BOOTPROTO=dhcp，并ifup启动）</span>  </span><br><span class="line">nmcli c add type ethernet con-name ethX ifname ethX ipv4.method auto  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改ip（非交互式）</span>  </span><br><span class="line">nmcli c modify ethX ipv4.addr &#x27;192.168.1.200/24&#x27;  </span><br><span class="line">nmcli c up ethX  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改ip（交互式）</span>  </span><br><span class="line">nmcli c edit ethX  </span><br><span class="line"><span class="meta prompt_">nmcli&gt; </span><span class="language-bash">goto ipv4.addresses</span>  </span><br><span class="line">nmcli ipv4.addresses&gt; change  </span><br><span class="line">Edit &#x27;addresses&#x27; value: 192.168.1.200/24  </span><br><span class="line">Do you also want to set &#x27;ipv4.method&#x27; to &#x27;manual&#x27;? [yes]: yes  </span><br><span class="line">nmcli ipv4&gt; save  </span><br><span class="line">nmcli ipv4&gt; activate  </span><br><span class="line">nmcli ipv4&gt; quit  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启用connection（相当于ifup）</span>  </span><br><span class="line">nmcli c up ethX  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">停止connection（相当于ifdown）</span>  </span><br><span class="line">nmcli c down  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除connection（类似于ifdown并删除ifcfg）</span>  </span><br><span class="line">nmcli c delete ethX  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看connection列表</span>  </span><br><span class="line">nmcli c show  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看connection详细信息</span>  </span><br><span class="line">nmcli c show ethX  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重载所有ifcfg或route到connection（不会立即生效）</span>  </span><br><span class="line">nmcli c reload  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重载指定ifcfg或route到connection（不会立即生效）</span>  </span><br><span class="line">nmcli c load /etc/sysconfig/network-scripts/ifcfg-ethX  </span><br><span class="line">nmcli c load /etc/sysconfig/network-scripts/route-ethX  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">立即生效connection，有3种方法</span>  </span><br><span class="line">nmcli c up ethX  </span><br><span class="line">nmcli d reapply ethX  </span><br><span class="line">nmcli d connect ethX  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看device列表</span>  </span><br><span class="line">nmcli d  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看所有device详细信息</span>  </span><br><span class="line">nmcli d show  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看指定device的详细信息</span>  </span><br><span class="line">nmcli d show ethX  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">激活网卡</span>  </span><br><span class="line">nmcli d connect ethX  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭无线网络（NM默认启用无线网络）</span>  </span><br><span class="line">nmcli r all off  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看NM纳管状态</span>  </span><br><span class="line">nmcli n  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启NM纳管</span>  </span><br><span class="line">nmcli n on  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭NM纳管（谨慎执行）</span>  </span><br><span class="line">nmcli n off  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">监听事件</span>  </span><br><span class="line">nmcli m  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看NM本身状态</span>  </span><br><span class="line">nmcli  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检测NM是否在线可用</span>  </span><br><span class="line">nm-online</span><br></pre></td></tr></table></figure><h4 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h4><h5 id="例子1：创建一个连接（connection）"><a href="#例子1：创建一个连接（connection）" class="headerlink" title="例子1：创建一个连接（connection）"></a>例子1：创建一个连接（connection）</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli c add type ethernet con-name ethX-test ifname ethX ipv4.addresses &#x27;192.168.1.100/24,92.168.1.101/32&#x27; ipv4.routes &#x27;10.0.0.0/8 192.168.1.10,192.168.0.0/16 192.168.1.11&#x27; ipv4.gateway 192.168.1.254 ipv4.dns &#x27;8.8.8.8,4.4.4.4&#x27; ipv4.method manual</span><br></pre></td></tr></table></figure><ul><li>type ethernet：创建连接时候必须指定类型，类型有很多，可以通过 nmcli c add type-h看到，这里指定为ethernet。  </li><li>con-name ethX ifname ethX：第一个ethX表示连接（connection）的名字，这个名字可以任意定义，无需和网卡名相同；第二个ethX表示网卡名，这个ethX必须是在 nmcli d里能看到的。  </li><li>ipv4.addresses ‘192.168.1.100&#x2F;24,192.168.1.101&#x2F;32’：配置2个ip地址，分别为192.168.1.100&#x2F;24和192.168.1.101&#x2F;32  </li><li>ipv4.gateway 192.168.1.254：网关为192.168.1.254  </li><li>ipv4.dns ‘8.8.8.8,4.4.4.4’：dns为8.8.8.8和4.4.4.4  </li><li>ipv4.method manual：配置静态IP</li></ul><h5 id="例子2：对IP地址的操作"><a href="#例子2：对IP地址的操作" class="headerlink" title="例子2：对IP地址的操作"></a>例子2：对IP地址的操作</h5><p>【<strong>修改</strong>】这些属性可以用nmcli connection show bond-bond0进行获取，然后可以修改、添加或删除属性，若要设置属性，只需指定属性名称后跟值，空值将删除属性值，同一属性添加多个值使用+。同一属性删除指定值用-加索引（<strong>modify</strong>）<br><strong>添加多个ip</strong>（+ipv4.addresses）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加三个ip $ nmcli connection modify bond-bond0 +ipv4.addresses 192.168.182.102/24 $ nmcli connection modify bond-bond0 +ipv4.addresses 192.168.182.103/24 $ nmcli connection modify bond-bond0 +ipv4.addresses 192.168.182.104/24 <span class="comment"># 查看，查不到。 $ nmcli -f IP4 connection show bond-bond0 IP4.ADDRESS[1]: 192.168.182.152/24 IP4.GATEWAY: 192.168.182.2 IP4.ROUTE[1]: dst = 192.168.182.0/24, nh = 0.0.0.0, mt = 300 IP4.ROUTE[2]: dst = 0.0.0.0/0, nh = 192.168.182.2, mt = 300 IP4.DNS[1]: 8.8.8.8 # 启用配置 $ nmcli connection up bond-bond0 # 再次查看，就可以查到刚才添加的三个ip $ nmcli -f IP4 connection show bond-bond0 IP4.ADDRESS[1]: 192.168.182.152/24 IP4.ADDRESS[2]: 192.168.182.102/24 IP4.ADDRESS[3]: 192.168.182.103/24 IP4.ADDRESS[4]: 192.168.182.104/24 IP4.GATEWAY: 192.168.182.2 IP4.ROUTE[1]: dst = 192.168.182.0/24, nh = 0.0.0.0, mt = 300 IP4.ROUTE[2]: dst = 192.168.182.0/24, nh = 0.0.0.0, mt = 300 IP4.ROUTE[3]: dst = 192.168.182.0/24, nh = 0.0.0.0, mt = 300 IP4.ROUTE[4]: dst = 192.168.182.0/24, nh = 0.0.0.0, mt = 300 IP4.ROUTE[5]: dst = 0.0.0.0/0, nh = 192.168.182.2, mt = 300 IP4.DNS[1]: 8.8.8.8</span></span></span><br></pre></td></tr></table></figure><p><strong>删除指定ip</strong>（-ipv4.addresses）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除刚刚添加的三个ip $ nmcli connection modify bond-bond0 -ipv4.addresses 192.168.182.102/24 $ nmcli connection modify bond-bond0 -ipv4.addresses 192.168.182.103/24 $ nmcli connection modify bond-bond0 -ipv4.addresses 192.168.182.104/24 <span class="comment"># 启用配置 $ nmcli connection up bond-bond0 # 查看 $ nmcli -f IP4 connection show bond-bond0</span></span></span><br></pre></td></tr></table></figure><p>【<strong>添加</strong>】这是创建一个新的连接，需要指定新创建连接的属性，语法与modify相同（<strong>add</strong>）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前所有连接，c是connection的缩写 $ nmcli c show $ nmcli con add con-name eth1 <span class="built_in">type</span> ethernet autoconnect <span class="built_in">yes</span> ifname ens33 $ nmcli c show <span class="comment"># con-name 连接名称 # type 连接类型 # autoconnect 是否自动连接 # ifname 连接到的设备名称</span></span></span><br></pre></td></tr></table></figure><h5 id="例子3：对DNS的配置"><a href="#例子3：对DNS的配置" class="headerlink" title="例子3：对DNS的配置"></a>例子3：对DNS的配置</h5><h6 id="方式1：修改or添加NM的配置文件"><a href="#方式1：修改or添加NM的配置文件" class="headerlink" title="方式1：修改or添加NM的配置文件"></a>方式1：修改or添加NM的配置文件</h6><p>修改&#x2F;etc&#x2F;NetworkManager&#x2F;conf.d&#x2F;dns.conf(如没有此文件，新建即可),增加如下两行配置： </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[main]</span><br><span class="line">dns=null</span><br></pre></td></tr></table></figure><p> 修改&#x2F;etc&#x2F;NetworkManager&#x2F;conf.d&#x2F;dns-servers.conf(如没有此文件，新建即可),增加如下两行配置,设置自定义dns： </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[global-dns-domain-*]</span><br><span class="line">servers=::1,127.0.0.1,8.8.8.8</span><br></pre></td></tr></table></figure><p>  重启软件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart NetworkManager</span><br></pre></td></tr></table></figure><h6 id="方式2：配置时指定网络设备的DNS"><a href="#方式2：配置时指定网络设备的DNS" class="headerlink" title="方式2：配置时指定网络设备的DNS"></a>方式2：配置时指定网络设备的DNS</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">显示当前网络连接</span></span><br><span class="line">nmcli connection show</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">NAME UUID TYPE DEVICE</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eno1 5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03 802-3-ethernet eno1</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改当前网络连接对应的DNS服务器，这里的网络连接可以用名称或者uuid来标识</span></span><br><span class="line">nmcli con mod eno1 ipv4.dns &quot;223.5.5.5 8.8.8.8&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">应用DNS配置，使之生效</span></span><br><span class="line">nmcli con up eno1</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> dns </tag>
            
            <tag> nmcli </tag>
            
            <tag> network </tag>
            
            <tag> ip </tag>
            
            <tag> config </tag>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu 手动修改home下中英文显示[resolved]</title>
      <link href="/2024/12/05/ubuntu%E6%89%8B%E5%8A%A8%E4%BF%AE%E6%94%B9home%E4%B8%8B%E4%B8%AD%E8%8B%B1%E6%96%87%E6%98%BE%E7%A4%BA/"/>
      <url>/2024/12/05/ubuntu%E6%89%8B%E5%8A%A8%E4%BF%AE%E6%94%B9home%E4%B8%8B%E4%B8%AD%E8%8B%B1%E6%96%87%E6%98%BE%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.config/user-dirs.locale</span><br></pre></td></tr></table></figure><p>打开后会发现文件内容即为当前系统的语言支持。<br>改为目标语言即可：<br>zh_CN对应中文<br>zh_en对应英文</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> config </tag>
            
            <tag> desktop </tag>
            
            <tag> resolved </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu 桌面文件夹意外删除[resolved]</title>
      <link href="/2024/12/05/ubuntu%E6%A1%8C%E9%9D%A2%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF%E4%BF%AE%E5%A4%8D/"/>
      <url>/2024/12/05/ubuntu%E6%A1%8C%E9%9D%A2%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF%E4%BF%AE%E5%A4%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>因意外操作导致desktop文件夹被删除，ls命令查看&#x2F;home&#x2F;[username]&#x2F;desktop显示链接失效；与此同时，由于desktop文件夹的缺失ubuntu系统自动将&#x2F;home&#x2F;[username]的内容自动显示在桌面上。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.config</span><br><span class="line">vim user-dirs.dirs</span><br></pre></td></tr></table></figure><p>根据文件内容，大致修改为以下内容，根据实际情况更改即可。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># This file is written by xdg-user-dirs-update</span><br><span class="line"># If you want to change or add directories, just edit the line you&#x27;re</span><br><span class="line"># interested in. All local changes will be retained on the next run.</span><br><span class="line"># Format is XDG_xxx_DIR=&quot;$HOME/yyy&quot;, where yyy is a shell-escaped</span><br><span class="line"># homedir-relative path, or XDG_xxx_DIR=&quot;/yyy&quot;, where /yyy is an</span><br><span class="line"># absolute path. No other format is supported.</span><br><span class="line"># </span><br><span class="line">XDG_DESKTOP_DIR=&quot;$HOME/Desktop&quot;</span><br><span class="line">XDG_DOWNLOAD_DIR=&quot;$HOME/Downloads&quot;</span><br><span class="line">XDG_TEMPLATES_DIR=&quot;$HOME/Templates&quot;</span><br><span class="line">XDG_PUBLICSHARE_DIR=&quot;$HOME/Public&quot;</span><br><span class="line">XDG_DOCUMENTS_DIR=&quot;$HOME/Documents&quot;</span><br><span class="line">XDG_MUSIC_DIR=&quot;$HOME/Music&quot;</span><br><span class="line">XDG_PICTURES_DIR=&quot;$HOME/Pictures&quot;</span><br><span class="line">XDG_VIDEOS_DIR=&quot;$HOME/Videos&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> config </tag>
            
            <tag> desktop </tag>
            
            <tag> resolved </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Http协议之Content-Type</title>
      <link href="/2024/12/01/Http-content-type/"/>
      <url>/2024/12/01/Http-content-type/</url>
      
        <content type="html"><![CDATA[<h2 id="HTTP-content-type"><a href="#HTTP-content-type" class="headerlink" title="HTTP content-type"></a>HTTP content-type</h2><p>Content-Type（内容类型），一般是指网页中存在的 Content-Type，用于定义网络文件的类型和网页的编码，决定浏览器将以什么形式、什么编码读取这个文件，这就是经常看到一些 PHP 网页点击的结果却是下载一个文件或一张图片的原因。</p><p>Content-Type 标头告诉客户端实际返回的内容的内容类型。</p><h2 id="语法格式："><a href="#语法格式：" class="headerlink" title="语法格式："></a>语法格式：</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">Content-Type: multipart/form-data; boundary=something</span><br></pre></td></tr></table></figure><h2 id="常见的媒体格式类型如下："><a href="#常见的媒体格式类型如下：" class="headerlink" title="常见的媒体格式类型如下："></a>常见的媒体格式类型如下：</h2><p>text&#x2F;html ： HTML格式<br>text&#x2F;plain ：纯文本格式<br>text&#x2F;xml ： XML格式<br>image&#x2F;gif ：gif图片格式<br>image&#x2F;jpeg ：jpg图片格式<br>image&#x2F;png：png图片格式</p><p>以application开头的媒体格式类型：</p><p>application&#x2F;xhtml+xml ：XHTML格式<br>application&#x2F;xml： XML数据格式<br>application&#x2F;atom+xml ：Atom XML聚合格式<br>application&#x2F;json： JSON数据格式<br>application&#x2F;pdf：pdf格式<br>application&#x2F;msword ： Word文档格式<br>application&#x2F;octet-stream ： 二进制流数据（如常见的文件下载）<br>application&#x2F;x-www-form-urlencoded ： <form encType=””>中默认的encType，form表单数据被编码为key&#x2F;value格式发送到服务器（表单默认的提交数据的格式）<br>另外一种常见的媒体格式是上传文件之时使用的：</p><p>multipart&#x2F;form-data ： 需要在表单中进行文件上传时，就需要使用该格式</p><h2 id="HTTP-content-type-对照表"><a href="#HTTP-content-type-对照表" class="headerlink" title="HTTP content-type 对照表"></a>HTTP content-type 对照表</h2><p>文件扩展名Content-Type(Mime-Type)文件扩展名Content-Type(Mime-Type)<br>.<em>（ 二进制流，不知道下载文件类型）application&#x2F;octet-stream.tifimage&#x2F;tiff<br>.001application&#x2F;x-001.301application&#x2F;x-301<br>.323text&#x2F;h323.906application&#x2F;x-906<br>.907drawing&#x2F;907.a11application&#x2F;x-a11<br>.acpaudio&#x2F;x-mei-aac.aiapplication&#x2F;postscript<br>.aifaudio&#x2F;aiff.aifcaudio&#x2F;aiff<br>.aiffaudio&#x2F;aiff.anvapplication&#x2F;x-anv<br>.asatext&#x2F;asa.asfvideo&#x2F;x-ms-asf<br>.asptext&#x2F;asp.asxvideo&#x2F;x-ms-asf<br>.auaudio&#x2F;basic.avivideo&#x2F;avi<br>.awfapplication&#x2F;vnd.adobe.workflow.biztext&#x2F;xml<br>.bmpapplication&#x2F;x-bmp.botapplication&#x2F;x-bot<br>.c4tapplication&#x2F;x-c4t.c90application&#x2F;x-c90<br>.calapplication&#x2F;x-cals.catapplication&#x2F;vnd.ms-pki.seccat<br>.cdfapplication&#x2F;x-netcdf.cdrapplication&#x2F;x-cdr<br>.celapplication&#x2F;x-cel.cerapplication&#x2F;x-x509-ca-cert<br>.cg4application&#x2F;x-g4.cgmapplication&#x2F;x-cgm<br>.citapplication&#x2F;x-cit.classjava&#x2F;</em><br>.cmltext&#x2F;xml.cmpapplication&#x2F;x-cmp<br>.cmxapplication&#x2F;x-cmx.cotapplication&#x2F;x-cot<br>.crlapplication&#x2F;pkix-crl.crtapplication&#x2F;x-x509-ca-cert<br>.csiapplication&#x2F;x-csi.csstext&#x2F;css<br>.cutapplication&#x2F;x-cut.dbfapplication&#x2F;x-dbf<br>.dbmapplication&#x2F;x-dbm.dbxapplication&#x2F;x-dbx<br>.dcdtext&#x2F;xml.dcxapplication&#x2F;x-dcx<br>.derapplication&#x2F;x-x509-ca-cert.dgnapplication&#x2F;x-dgn<br>.dibapplication&#x2F;x-dib.dllapplication&#x2F;x-msdownload<br>.docapplication&#x2F;msword.dotapplication&#x2F;msword<br>.drwapplication&#x2F;x-drw.dtdtext&#x2F;xml<br>.dwfModel&#x2F;vnd.dwf.dwfapplication&#x2F;x-dwf<br>.dwgapplication&#x2F;x-dwg.dxbapplication&#x2F;x-dxb<br>.dxfapplication&#x2F;x-dxf.ednapplication&#x2F;vnd.adobe.edn<br>.emfapplication&#x2F;x-emf.emlmessage&#x2F;rfc822<br>.enttext&#x2F;xml.epiapplication&#x2F;x-epi<br>.epsapplication&#x2F;x-ps.epsapplication&#x2F;postscript<br>.etdapplication&#x2F;x-ebx.exeapplication&#x2F;x-msdownload<br>.faximage&#x2F;fax.fdfapplication&#x2F;vnd.fdf<br>.fifapplication&#x2F;fractals.fotext&#x2F;xml<br>.frmapplication&#x2F;x-frm.g4application&#x2F;x-g4<br>.gbrapplication&#x2F;x-gbr.application&#x2F;x-<br>.gifimage&#x2F;gif.gl2application&#x2F;x-gl2<br>.gp4application&#x2F;x-gp4.hglapplication&#x2F;x-hgl<br>.hmrapplication&#x2F;x-hmr.hpgapplication&#x2F;x-hpgl<br>.hplapplication&#x2F;x-hpl.hqxapplication&#x2F;mac-binhex40<br>.hrfapplication&#x2F;x-hrf.htaapplication&#x2F;hta<br>.htctext&#x2F;x-component.htmtext&#x2F;html<br>.htmltext&#x2F;html.htttext&#x2F;webviewhtml<br>.htxtext&#x2F;html.icbapplication&#x2F;x-icb<br>.icoimage&#x2F;x-icon.icoapplication&#x2F;x-ico<br>.iffapplication&#x2F;x-iff.ig4application&#x2F;x-g4<br>.igsapplication&#x2F;x-igs.iiiapplication&#x2F;x-iphone<br>.imgapplication&#x2F;x-img.insapplication&#x2F;x-internet-signup<br>.ispapplication&#x2F;x-internet-signup.IVFvideo&#x2F;x-ivf<br>.javajava&#x2F;*.jfifimage&#x2F;jpeg<br>.jpeimage&#x2F;jpeg.jpeapplication&#x2F;x-jpe<br>.jpegimage&#x2F;jpeg.jpgimage&#x2F;jpeg<br>.jpgapplication&#x2F;x-jpg.jsapplication&#x2F;x-javascript<br>.jsptext&#x2F;html.la1audio&#x2F;x-liquid-file<br>.larapplication&#x2F;x-laplayer-reg.latexapplication&#x2F;x-latex<br>.lavsaudio&#x2F;x-liquid-secure.lbmapplication&#x2F;x-lbm<br>.lmsffaudio&#x2F;x-la-lms.lsapplication&#x2F;x-javascript<br>.ltrapplication&#x2F;x-ltr.m1vvideo&#x2F;x-mpeg<br>.m2vvideo&#x2F;x-mpeg.m3uaudio&#x2F;mpegurl<br>.m4evideo&#x2F;mpeg4.macapplication&#x2F;x-mac<br>.manapplication&#x2F;x-troff-man.mathtext&#x2F;xml<br>.mdbapplication&#x2F;msaccess.mdbapplication&#x2F;x-mdb<br>.mfpapplication&#x2F;x-shockwave-flash.mhtmessage&#x2F;rfc822<br>.mhtmlmessage&#x2F;rfc822.miapplication&#x2F;x-mi<br>.midaudio&#x2F;mid.midiaudio&#x2F;mid<br>.milapplication&#x2F;x-mil.mmltext&#x2F;xml<br>.mndaudio&#x2F;x-musicnet-download.mnsaudio&#x2F;x-musicnet-stream<br>.mochaapplication&#x2F;x-javascript.movievideo&#x2F;x-sgi-movie<br>.mp1audio&#x2F;mp1.mp2audio&#x2F;mp2<br>.mp2vvideo&#x2F;mpeg.mp3audio&#x2F;mp3<br>.mp4video&#x2F;mpeg4.mpavideo&#x2F;x-mpg<br>.mpdapplication&#x2F;vnd.ms-project.mpevideo&#x2F;x-mpeg<br>.mpegvideo&#x2F;mpg.mpgvideo&#x2F;mpg<br>.mpgaaudio&#x2F;rn-mpeg.mppapplication&#x2F;vnd.ms-project<br>.mpsvideo&#x2F;x-mpeg.mptapplication&#x2F;vnd.ms-project<br>.mpvvideo&#x2F;mpg.mpv2video&#x2F;mpeg<br>.mpwapplication&#x2F;vnd.ms-project.mpxapplication&#x2F;vnd.ms-project<br>.mtxtext&#x2F;xml.mxpapplication&#x2F;x-mmxp<br>.netimage&#x2F;pnetvue.nrfapplication&#x2F;x-nrf<br>.nwsmessage&#x2F;rfc822.odctext&#x2F;x-ms-odc<br>.outapplication&#x2F;x-out.p10application&#x2F;pkcs10<br>.p12application&#x2F;x-pkcs12.p7bapplication&#x2F;x-pkcs7-certificates<br>.p7capplication&#x2F;pkcs7-mime.p7mapplication&#x2F;pkcs7-mime<br>.p7rapplication&#x2F;x-pkcs7-certreqresp.p7sapplication&#x2F;pkcs7-signature<br>.pc5application&#x2F;x-pc5.pciapplication&#x2F;x-pci<br>.pclapplication&#x2F;x-pcl.pcxapplication&#x2F;x-pcx<br>.pdfapplication&#x2F;pdf.pdfapplication&#x2F;pdf<br>.pdxapplication&#x2F;vnd.adobe.pdx.pfxapplication&#x2F;x-pkcs12<br>.pglapplication&#x2F;x-pgl.picapplication&#x2F;x-pic<br>.pkoapplication&#x2F;vnd.ms-pki.pko.plapplication&#x2F;x-perl<br>.plgtext&#x2F;html.plsaudio&#x2F;scpls<br>.pltapplication&#x2F;x-plt.pngimage&#x2F;png<br>.pngapplication&#x2F;x-png.potapplication&#x2F;vnd.ms-powerpoint<br>.ppaapplication&#x2F;vnd.ms-powerpoint.ppmapplication&#x2F;x-ppm<br>.ppsapplication&#x2F;vnd.ms-powerpoint.pptapplication&#x2F;vnd.ms-powerpoint<br>.pptapplication&#x2F;x-ppt.prapplication&#x2F;x-pr<br>.prfapplication&#x2F;pics-rules.prnapplication&#x2F;x-prn<br>.prtapplication&#x2F;x-prt.psapplication&#x2F;x-ps<br>.psapplication&#x2F;postscript.ptnapplication&#x2F;x-ptn<br>.pwzapplication&#x2F;vnd.ms-powerpoint.r3ttext&#x2F;vnd.rn-realtext3d<br>.raaudio&#x2F;vnd.rn-realaudio.ramaudio&#x2F;x-pn-realaudio<br>.rasapplication&#x2F;x-ras.ratapplication&#x2F;rat-file<br>.rdftext&#x2F;xml.recapplication&#x2F;vnd.rn-recording<br>.redapplication&#x2F;x-red.rgbapplication&#x2F;x-rgb<br>.rjsapplication&#x2F;vnd.rn-realsystem-rjs.rjtapplication&#x2F;vnd.rn-realsystem-rjt<br>.rlcapplication&#x2F;x-rlc.rleapplication&#x2F;x-rle<br>.rmapplication&#x2F;vnd.rn-realmedia.rmfapplication&#x2F;vnd.adobe.rmf<br>.rmiaudio&#x2F;mid.rmjapplication&#x2F;vnd.rn-realsystem-rmj<br>.rmmaudio&#x2F;x-pn-realaudio.rmpapplication&#x2F;vnd.rn-rn_music_package<br>.rmsapplication&#x2F;vnd.rn-realmedia-secure.rmvbapplication&#x2F;vnd.rn-realmedia-vbr<br>.rmxapplication&#x2F;vnd.rn-realsystem-rmx.rnxapplication&#x2F;vnd.rn-realplayer<br>.rpimage&#x2F;vnd.rn-realpix.rpmaudio&#x2F;x-pn-realaudio-plugin<br>.rsmlapplication&#x2F;vnd.rn-rsml.rttext&#x2F;vnd.rn-realtext<br>.rtfapplication&#x2F;msword.rtfapplication&#x2F;x-rtf<br>.rvvideo&#x2F;vnd.rn-realvideo.samapplication&#x2F;x-sam<br>.satapplication&#x2F;x-sat.sdpapplication&#x2F;sdp<br>.sdwapplication&#x2F;x-sdw.sitapplication&#x2F;x-stuffit<br>.slbapplication&#x2F;x-slb.sldapplication&#x2F;x-sld<br>.slkdrawing&#x2F;x-slk.smiapplication&#x2F;smil<br>.smilapplication&#x2F;smil.smkapplication&#x2F;x-smk<br>.sndaudio&#x2F;basic.soltext&#x2F;plain<br>.sortext&#x2F;plain.spcapplication&#x2F;x-pkcs7-certificates<br>.splapplication&#x2F;futuresplash.spptext&#x2F;xml<br>.ssmapplication&#x2F;streamingmedia.sstapplication&#x2F;vnd.ms-pki.certstore<br>.stlapplication&#x2F;vnd.ms-pki.stl.stmtext&#x2F;html<br>.styapplication&#x2F;x-sty.svgtext&#x2F;xml<br>.swfapplication&#x2F;x-shockwave-flash.tdfapplication&#x2F;x-tdf<br>.tg4application&#x2F;x-tg4.tgaapplication&#x2F;x-tga<br>.tifimage&#x2F;tiff.tifapplication&#x2F;x-tif<br>.tiffimage&#x2F;tiff.tldtext&#x2F;xml<br>.topdrawing&#x2F;x-top.torrentapplication&#x2F;x-bittorrent<br>.tsdtext&#x2F;xml.txttext&#x2F;plain<br>.uinapplication&#x2F;x-icq.ulstext&#x2F;iuls<br>.vcftext&#x2F;x-vcard.vdaapplication&#x2F;x-vda<br>.vdxapplication&#x2F;vnd.visio.vmltext&#x2F;xml<br>.vpgapplication&#x2F;x-vpeg005.vsdapplication&#x2F;vnd.visio<br>.vsdapplication&#x2F;x-vsd.vssapplication&#x2F;vnd.visio<br>.vstapplication&#x2F;vnd.visio.vstapplication&#x2F;x-vst<br>.vswapplication&#x2F;vnd.visio.vsxapplication&#x2F;vnd.visio<br>.vtxapplication&#x2F;vnd.visio.vxmltext&#x2F;xml<br>.wavaudio&#x2F;wav.waxaudio&#x2F;x-ms-wax<br>.wb1application&#x2F;x-wb1.wb2application&#x2F;x-wb2<br>.wb3application&#x2F;x-wb3.wbmpimage&#x2F;vnd.wap.wbmp<br>.wizapplication&#x2F;msword.wk3application&#x2F;x-wk3<br>.wk4application&#x2F;x-wk4.wkqapplication&#x2F;x-wkq<br>.wksapplication&#x2F;x-wks.wmvideo&#x2F;x-ms-wm<br>.wmaaudio&#x2F;x-ms-wma.wmdapplication&#x2F;x-ms-wmd<br>.wmfapplication&#x2F;x-wmf.wmltext&#x2F;vnd.wap.wml<br>.wmvvideo&#x2F;x-ms-wmv.wmxvideo&#x2F;x-ms-wmx<br>.wmzapplication&#x2F;x-ms-wmz.wp6application&#x2F;x-wp6<br>.wpdapplication&#x2F;x-wpd.wpgapplication&#x2F;x-wpg<br>.wplapplication&#x2F;vnd.ms-wpl.wq1application&#x2F;x-wq1<br>.wr1application&#x2F;x-wr1.wriapplication&#x2F;x-wri<br>.wrkapplication&#x2F;x-wrk.wsapplication&#x2F;x-ws<br>.ws2application&#x2F;x-ws.wsctext&#x2F;scriptlet<br>.wsdltext&#x2F;xml.wvxvideo&#x2F;x-ms-wvx<br>.xdpapplication&#x2F;vnd.adobe.xdp.xdrtext&#x2F;xml<br>.xfdapplication&#x2F;vnd.adobe.xfd.xfdfapplication&#x2F;vnd.adobe.xfdf<br>.xhtmltext&#x2F;html.xlsapplication&#x2F;vnd.ms-excel<br>.xlsapplication&#x2F;x-xls.xlwapplication&#x2F;x-xlw<br>.xmltext&#x2F;xml.xplaudio&#x2F;scpls<br>.xqtext&#x2F;xml.xqltext&#x2F;xml<br>.xquerytext&#x2F;xml.xsdtext&#x2F;xml<br>.xsltext&#x2F;xml.xslttext&#x2F;xml<br>.xwdapplication&#x2F;x-xwd.x_bapplication&#x2F;x-x_b<br>.sisapplication&#x2F;vnd.symbian.install.sisxapplication&#x2F;vnd.symbian.install<br>.x_tapplication&#x2F;x-x_t.ipaapplication&#x2F;vnd.iphone<br>.apkapplication&#x2F;vnd.android.package-archive.xapapplication&#x2F;x-silverlight-app</p>]]></content>
      
      
      
        <tags>
            
            <tag> http协议 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
